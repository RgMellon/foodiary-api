createMeal:
    handler: src/main/functions/meals/createMeal.handler
    events:
        - httpApi:
              path: /meals
              method: POST
              authorizer:
                  name: CognitoAuthorizer
listMealsByDay:
    handler: src/main/functions/meals/listMealsByDay.handler
    events:
        - httpApi:
              path: /meals
              method: GET
              authorizer:
                  name: CognitoAuthorizer

getListMealById:
    handler: src/main/functions/meals/getListMealById.handler
    events:
        - httpApi:
              path: /meals/{id}
              method: GET
              authorizer:
                  name: CognitoAuthorizer

onMealFileUploaded:
    handler: src/main/functions/meals/onMealFileUploaded.handler
    events:
        - s3:
              bucket: !Ref MealsBucket
              event: s3:ObjectCreated:*
              forceDeploy: true
              existing: true

processMeal:
    handler: src/main/functions/meals/processMeal.handler
    memorySize: 1024 #1 giga for safety
    timeout: 120 # 2 minutes
    events:
        - sqs:
              bucket: !GetAtt MealsQueue
              batchSize: 2
